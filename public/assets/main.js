(function(){let e=!0;const t=()=>{const t=document.body,n=document.getElementById("loading-overlay");n&&(n.style.opacity="0",setTimeout(()=>{n.style.display="none"},500)),t.style.opacity="1"},n=()=>{const t=document.getElementById("loading-overlay");t&&!e&&(t.style.display="flex",t.style.opacity="1")};let o;"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{setTimeout(t,100),e=!1}):(setTimeout(t,100),e=!1),document.addEventListener("click",a=>{const r=a.target,s=r?.closest("a");s&&s.href&&s.href.startsWith(window.location.origin)&&!s.target&&(clearTimeout(o),n(),o=setTimeout(()=>{t()},3e3))}),window.addEventListener("pageshow",t),window.addEventListener("popstate",t)})();
document.addEventListener("DOMContentLoaded",()=>{const darkIcon=document.getElementById("theme-toggle-dark-icon"),lightIcon=document.getElementById("theme-toggle-light-icon"),updateIcons=isDark=>{isDark?(lightIcon?.classList.remove("hidden"),darkIcon?.classList.add("hidden")):(darkIcon?.classList.remove("hidden"),lightIcon?.classList.add("hidden"))},theme=(()=>"undefined"!=typeof localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")||"dark":"dark")(),isDark="dark"===theme;isDark?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),updateIcons(isDark),window.localStorage.setItem("theme",theme);const handleToggle=()=>{const el=document.documentElement;el.classList.toggle("dark");const newIsDark=el.classList.contains("dark");updateIcons(newIsDark),localStorage.setItem("theme",newIsDark?"dark":"light")},toggleBtn=document.getElementById("theme-toggle");toggleBtn&&toggleBtn.addEventListener("click",handleToggle);const s=document.getElementById("search"),c=document.getElementById("search-results");if(s&&c){let e,t=null,n=!1;const o=async()=>{if(t)return t;if(n){for(;n;)await new Promise(e=>setTimeout(e,50));return t}n=!0;try{const e="/pagefind/pagefind.js";return t=await import(e),await t.init(),console.log("Pagefind loaded successfully"),t}catch(e){return console.warn("Pagefind not available:",e),t=null}finally{n=!1}};s.addEventListener("focus",o,{once:!0}),s.addEventListener("input",async t=>{const n=t.target,a=n.value.trim();if(clearTimeout(e),a.length<2)return void c.classList.add("hidden");e=setTimeout(async()=>{const e=await o();if(!e)return c.innerHTML='<div class="p-4 text-gray-500 dark:text-gray-400 text-sm">Search not available</div>',void c.classList.remove("hidden");try{const t=await e.search(a);if(0===t.results.length)c.innerHTML='<div class="p-4 text-gray-500 dark:text-gray-400 text-sm">No results found</div>';else{const e=await Promise.all(t.results.slice(0,8).map(async e=>{const t=await e.data();return`<a href="${t.url}" class="block p-4 hover:bg-gray-100 dark:hover:bg-gray-700 border-b border-gray-100 dark:border-gray-700 last:border-b-0"><div class="font-medium text-sm text-gray-900 dark:text-gray-100">${t.meta.title||"Untitled"}</div><div class="text-xs text-gray-500 dark:text-gray-400 mt-1">${t.excerpt}</div><div class="text-xs text-cyan-600 dark:text-cyan-400 mt-1">${t.url}</div></a>`}));c.innerHTML=e.join("")}c.classList.remove("hidden")}catch(e){console.error("Search failed:",e),c.innerHTML='<div class="p-4 text-red-500 text-sm">Search failed</div>',c.classList.remove("hidden")}},300)}),document.addEventListener("click",e=>{s.contains(e.target)||c.contains(e.target)||c.classList.add("hidden")}),s.addEventListener("keydown",e=>{"Escape"===e.key&&(c.classList.add("hidden"),s.blur())})}}); 